<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>KCGI Talking Map Guide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body style="text-align:center;font-family:Arial;background:#f7f7f7;padding:20px;">

    <h2 id="title">KCGI Location Guide</h2>

    <!-- MAP PREVIEW IMAGE -->
    <img id="mapImg" src="" alt="Map Preview"
        style="width:100%;max-width:720px;border-radius:12px;margin:20px 0;box-shadow:0 4px 10px rgba(0,0,0,0.2);">

    <!-- ACTION BUTTON -->
    <br>
    <button id="playBtn" style="font-size:18px;padding:15px 25px;border:none;
                 border-radius:10px;background:#007bff;color:white;">
        â–¶ Tap to Hear Directions & Open Map
    </button>

    <script>
        /* -------------------------------
           LOCATION CONFIGURATION
        --------------------------------*/
        const locations = {
            ekimae: {
                title: "Ekimae Campus",
                text: "KCGI students should first visit the Ekimae Campus after arriving in Japan. Here, students will sign documents and collect their room keys.",
                map: "https://maps.app.goo.gl/y84WBmrHCFWdzLmp6",
                image: "ekimae.png"
            },
            hblock: {
                title: "H Block",
                text: "This is H Block. Students will create their student ID cards, register for classes, sign scholarship documents, and attend classes here.",
                map: "https://maps.app.goo.gl/znB6JieBGnAzGeuC7",
                image: "hblock.png"
            },
            mblock: {
                title: "M Block",
                text: "This is M Block. Students will also attend classes at this location.",
                map: "https://maps.app.goo.gl/mFVoMWE2CukUkh526",
                image: "mblock.png"
            }
        };

        /* -------------------------------
           READ URL PARAMETER
        --------------------------------*/
        const params = new URLSearchParams(window.location.search);
        const id = params.get("id") || "ekimae";
        const loc = locations[id];

        /* -------------------------------
           PAGE SETUP
        --------------------------------*/
        if (!loc) {
            document.getElementById("title").innerText = "Invalid Location";
            document.getElementById("playBtn").style.display = "none";
        } else {
            document.getElementById("title").innerText = loc.title;
            document.getElementById("mapImg").src = loc.image;
        }

        /* -------------------------------
           BUTTON ACTION (REQUIRED FOR SOUND)
        --------------------------------*/
        document.getElementById("playBtn").onclick = () => {
            const speech = new SpeechSynthesisUtterance(loc.text);
            speech.lang = "en-US";
            speech.rate = 0.95;
            window.speechSynthesis.speak(speech);

            setTimeout(() => {
                window.location.href = loc.map;
            }, 3500);
        };
    </script>

</body>

</html>